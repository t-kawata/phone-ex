import{c as N,h as X,p as Ce,q as ye,e as J,Q as p,i as Q,b as ke}from"./QBtn.3d984a90.js";import{i as F,q as $,s as he,G as _e,c as o,h as m,g as R,d as Z,P as q,R as Se,_ as ee,I as g,J as I,L as u,ae as w,f as l,U as Ae,X as P,Y as U,W as A,K as h,D as O,F as z,af as Ue,n as fe,ag as me,r as ae,E as Te,t as H,u as $e,v as L,A as se,B as M,C as qe,V as Pe,Z as le}from"./index.2147a3ef.js";import{a as De,d as Be,p as f,E as b,q as Ee,n as K,Q as Y,m as B,s as oe,r as re,o as W,C as V,u as we,b as Oe,t as Ie,f as Ne,c as x}from"./index.0990a344.js";import"./axios.6e1fcf85.js";var Re=N({name:"QPage",props:{padding:Boolean,styleFn:Function},setup(e,{slots:t}){const{proxy:{$q:n}}=R(),i=F(he,$);if(i===$)return console.error("QPage needs to be a deep child of QLayout"),$;if(F(_e,$)===$)return console.error("QPage needs to be child of QPageContainer"),$;const s=o(()=>{const d=(i.header.space===!0?i.header.size:0)+(i.footer.space===!0?i.footer.size:0);if(typeof e.styleFn=="function"){const v=i.isContainer.value===!0?i.containerHeight.value:n.screen.height;return e.styleFn(d,v)}return{minHeight:i.isContainer.value===!0?i.containerHeight.value-d+"px":n.screen.height===0?d!==0?`calc(100vh - ${d}px)`:"100vh":n.screen.height-d+"px"}}),a=o(()=>`q-page${e.padding===!0?" q-layout-padding":""}`);return()=>m("main",{class:a.value,style:s.value},X(t.default))}});const Le={xs:2,sm:4,md:6,lg:10,xl:14};function ue(e,t,n){return{transform:t===!0?`translateX(${n.lang.rtl===!0?"-":""}100%) scale3d(${-e},1,1)`:`scale3d(${e},1,1)`}}var Ve=N({name:"QLinearProgress",props:{...De,...Ce,value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean},setup(e,{slots:t}){const{proxy:n}=R(),i=Be(e,n.$q),c=ye(e,Le),s=o(()=>e.indeterminate===!0||e.query===!0),a=o(()=>e.reverse!==e.query),d=o(()=>({...c.value!==null?c.value:{},"--q-linear-progress-speed":`${e.animationSpeed}ms`})),v=o(()=>"q-linear-progress"+(e.color!==void 0?` text-${e.color}`:"")+(e.reverse===!0||e.query===!0?" q-linear-progress--reverse":"")+(e.rounded===!0?" rounded-borders":"")),y=o(()=>ue(e.buffer!==void 0?e.buffer:1,a.value,n.$q)),T=o(()=>`with${e.instantFeedback===!0?"out":""}-transition`),r=o(()=>`q-linear-progress__track absolute-full q-linear-progress__track--${T.value} q-linear-progress__track--${i.value===!0?"dark":"light"}`+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),k=o(()=>ue(s.value===!0?1:e.value,a.value,n.$q)),_=o(()=>`q-linear-progress__model absolute-full q-linear-progress__model--${T.value} q-linear-progress__model--${s.value===!0?"in":""}determinate`),D=o(()=>({width:`${e.value*100}%`})),S=o(()=>`q-linear-progress__stripe absolute-${e.reverse===!0?"right":"left"} q-linear-progress__stripe--${T.value}`);return()=>{const E=[m("div",{class:r.value,style:y.value}),m("div",{class:_.value,style:k.value})];return e.stripe===!0&&s.value===!1&&E.push(m("div",{class:S.value,style:D.value})),m("div",{class:v.value,style:d.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":e.indeterminate===!0?void 0:e.value},J(t.default,E))}}}),Qe="/phone-ex/assets/ringing.15605af0.mp3";const de="PREV_USER",G=new Audio(Qe),Fe=Z({data(){return{number:"",customer:{},audioTest:!1,UA:{},UAStatus:f.UA_STATUS.UA_NOT_PREPARED,isDialogOpen:!1,isOpenConfirmDialog:!1,callerIdName:"",callerIdNum:"",isHolded:!1,isMuted:!1}},methods:{onClickCallBtn(){!this.isUAPrepared()||this.UA.call(this.number)},onClickHangupBtn(){!this.isUAPrepared()||this.UA.hangup()},onClickMuteBtn(){!this.isUAPrepared()||(this.isMuted=!0,this.UA.mute())},onClickUnmuteBtn(){!this.isUAPrepared()||(this.isMuted=!1,this.UA.unmute())},onClickHoldBtn(){!this.isUAPrepared()||(this.isHolded=!0,this.UA.hold())},onClickUnholdBtn(){!this.isUAPrepared()||(this.isHolded=!1,this.UA.unhold())},onClickAcceptBtn(){!this.isUAPrepared()||this.UA.accept()},onClickRejectBtn(){!this.isUAPrepared()||this.UA.hangup()},onClickStartRingingTest(){let e=!0;this.startRinging().catch(()=>{e=!1}),setTimeout(()=>{this.stopRinging(),e&&(this.audioTest=!0)},3500)},onClickCustomerListCallBtn(e){const{detail:t}=e,{number:n}=t;this.number=n,this.onClickCallBtn()},isUAPrepared(){return Object.keys(this.UA).length>0},prevChk(e){const t=q.getItem(de);return t?!(Object.keys(t).length>0&&!(e.key!==t.key||e.host!==t.host||e.username!==t.username||e.password!==t.password)):!0},startRinging(){return G.play()},stopRinging(){G.pause(),G.currentTime=0},searchCustomer(e,t){if(this.customer={},!this.customers||this.customers.length===0)return;const n=this.customers.filter(i=>i.number===t||i.name===e);n.length!==0&&(this.customer=n[0])},init(e){const t={key:q.getItem("KEY")||"",host:q.getItem("HOST")||"",username:q.getItem("USERNAME")||"",password:q.getItem("PASSWORD")||""};!t.key||!t.host||!t.username||!t.password||e&&!this.prevChk(t)||(q.set(de,t),this.isUAPrepared()&&(this.UA.stop(),this.UA=null),this.UA=new f.AstUA({host:t.host,key:t.key,username:t.username,password:t.password,remoteVideo:document.getElementById("__ast-remote-video"),localVideo:document.getElementById("__ast-local-video"),register:!0,watchUsers:!0,watchQueues:!0,udp:!0,ualog:!1,siplog:!1}),this.UA.on(f.EVENT_TYPE.UA_STATE_CHANGE,n=>{const{UAStatus:i}=n.detail;this.UAStatus=i,b.dispatch(b.Type.OnUAStatusChange,i)}),this.UA.on(f.EVENT_TYPE.UA_BEING_CALLED,n=>{this.isDialogOpen=!0;const{callerIdName:i,callerIdNum:c}=n.detail;this.callerIdName=i,this.callerIdNum=c,this.searchCustomer(i,c)}),this.UA.on(f.EVENT_TYPE.UA_BEING_CALLED_ANSWER,()=>{}),this.UA.on(f.EVENT_TYPE.UA_BEING_CALLED_END,()=>{this.isDialogOpen=!1}))}},computed:{...Se(Ee,["customers"]),isProgressing(){return!(this.UAStatus===f.UA_STATUS.UA_NOT_PREPARED||this.UAStatus===f.UA_STATUS.WAITING)},isCallable(){return this.UAStatus===f.UA_STATUS.WAITING},isToolable(){return this.UAStatus===f.UA_STATUS.TALKING||this.UAStatus===f.UA_STATUS.HOLDING||this.UAStatus===f.UA_STATUS.HOLDED},isEndable(){return this.UAStatus===f.UA_STATUS.CALLING||this.UAStatus===f.UA_STATUS.BRIDGING||this.UAStatus===f.UA_STATUS.TALKING||this.UAStatus===f.UA_STATUS.HOLDING||this.UAStatus===f.UA_STATUS.HOLDED},isReady(){return this.UAStatus!==f.UA_STATUS.UA_NOT_PREPARED}},watch:{isDialogOpen(e){e?this.startRinging().catch(t=>{console.log(t)}):this.stopRinging()}},mounted(){this.init(!1),setInterval(()=>{this.init(!0)},3e3),b.on(b.Type.OnClickCustomerListCallBtn,this.onClickCustomerListCallBtn),b.on(b.Type.OnClickStartRingingTest,this.onClickStartRingingTest),this.isOpenConfirmDialog=!0},unmounted(){b.off(b.Type.OnClickCustomerListCallBtn,this.onClickCustomerListCallBtn),b.off(b.Type.OnClickStartRingingTest,this.onClickStartRingingTest)}}),He={class:"phone-box"},Me={class:"account-status flex"},xe={class:"text-center q-ma-md"},Ge=u("span",{class:"q-ml-sm text-h6"},"\u7740\u4FE1\u4E2D\u3067\u3059",-1),je={class:"full-width"},ze=u("th",{class:"text-left"},"\u767A\u4FE1\u8005\u540D",-1),Ke=u("th",{class:"text-left"},"\u767A\u4FE1\u8005\u756A\u53F7",-1),Ye={class:"info-box bg-grey-3 q-pa-sm"},We={key:0},Xe={key:1},Je=u("th",{style:{"min-width":"50px"}},"\u540D\u524D",-1),Ze=u("th",null,"\u756A\u53F7",-1),et=u("th",null,"\u60C5\u5831",-1),tt=u("span",{class:"q-ml-sm"},"\u7740\u4FE1\u97F3\u306E\u30C6\u30B9\u30C8\u3092\u958B\u59CB\u3057\u3066\u3082\u3088\u308D\u3057\u3044\u3067\u3059\u304B\uFF1F",-1),it=Ue('<div style="display:none;"><video id="__ast-remote-video"><track kind="captions"></video><video id="__ast-local-video" muted><track kind="captions"></video></div>',1);function nt(e,t,n,i,c,s){return g(),I(z,null,[u("div",{class:w(["phone-page-container relative-position",e.isProgressing?"bg-grey-2":""])},[u("div",{class:w(e.isProgressing?"calling":"none")},[l(Ve,{dark:"",rounded:"",indeterminate:"",color:"cyan"})],2),u("div",He,[u("div",Me,[u("span",{class:w(["badge",e.isReady?"ready":"none"])},"\xA0",2),u("p",null,[Ae(P(e.isReady?"\u8A8D\u8A3C\u304C\u5B8C\u4E86\u3057\u307E\u3057\u305F":"\u8A8D\u8A3C\u304C\u5931\u6557\u3057\u307E\u3057\u305F")+" ",1),u("span",{class:w(["q-mx-sm",e.audioTest?"green":"red"])}," ["+P(e.audioTest?"\u7740\u4FE1\u97F3\u30C6\u30B9\u30C8OK":"\u7740\u4FE1\u97F3\u30C6\u30B9\u30C8NG")+"] ",3)])]),l(K,{class:"number-input",rounded:"",outlined:"",modelValue:e.number,"onUpdate:modelValue":t[0]||(t[0]=a=>e.number=a),label:"Number"},null,8,["modelValue"]),u("div",xe,[e.isEndable?(g(),U(p,{key:0,round:"",color:"dark",icon:"call_end",onClick:e.onClickHangupBtn,class:w(e.isToolable?"q-mr-md":"")},null,8,["onClick","class"])):A("",!0),e.isToolable&&!e.isMuted?(g(),U(p,{key:1,round:"",icon:"volume_off",onClick:e.onClickMuteBtn,class:"q-mr-md"},null,8,["onClick"])):A("",!0),e.isToolable&&e.isMuted?(g(),U(p,{key:2,round:"",icon:"volume_up",onClick:e.onClickUnmuteBtn,class:"q-mr-md"},null,8,["onClick"])):A("",!0),e.isToolable&&!e.isHolded?(g(),U(p,{key:3,round:"",icon:"music_note",onClick:e.onClickHoldBtn,class:"q-mr-md"},null,8,["onClick"])):A("",!0),e.isToolable&&e.isHolded?(g(),U(p,{key:4,round:"",icon:"music_off",onClick:e.onClickUnholdBtn,class:"q-mr-md"},null,8,["onClick"])):A("",!0),e.isCallable?(g(),U(p,{key:5,round:"",icon:"call",onClick:e.onClickCallBtn},null,8,["onClick"])):A("",!0)])])],2),l(W,{modelValue:e.isDialogOpen,"onUpdate:modelValue":t[1]||(t[1]=a=>e.isDialogOpen=a),persistent:"",position:"right"},{default:h(()=>[l(Y,{style:{width:"400px"}},{default:h(()=>[l(B,{class:"row items-center"},{default:h(()=>[l(oe,{icon:"ring_volume",class:"yureru-s"}),Ge]),_:1}),l(B,{class:"row items-center"},{default:h(()=>[u("table",je,[u("tr",null,[ze,u("td",null,P(e.callerIdName),1)]),u("tr",null,[Ke,u("td",null,P(e.callerIdNum),1)])])]),_:1}),l(B,null,{default:h(()=>[u("div",Ye,[Object.keys(e.customer).length===0?(g(),I("div",We," \u30C7\u30FC\u30BF\u30D9\u30FC\u30B9\u306B\u8A72\u5F53\u3059\u308B\u60C5\u5831\u304C\u3042\u308A\u307E\u305B\u3093\u3067\u3057\u305F\u3002 ")):A("",!0),Object.keys(e.customer).length>0?(g(),I("div",Xe,[u("table",null,[u("tr",null,[Je,u("td",null,P(e.customer.name),1)]),u("tr",null,[Ze,u("td",null,P(e.customer.number),1)]),u("tr",null,[et,u("td",null,P(e.customer.info),1)])])])):A("",!0)])]),_:1}),l(re,{align:"right"},{default:h(()=>[O(l(p,{label:"\u62D2\u5426\u3059\u308B",color:"dark",onClick:e.onClickRejectBtn},null,8,["onClick"]),[[V]]),O(l(p,{label:"\u96FB\u8A71\u306B\u51FA\u308B",onClick:e.onClickAcceptBtn},null,8,["onClick"]),[[V]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(W,{modelValue:e.isOpenConfirmDialog,"onUpdate:modelValue":t[2]||(t[2]=a=>e.isOpenConfirmDialog=a),persistent:""},{default:h(()=>[l(Y,null,{default:h(()=>[l(B,{class:"row items-center"},{default:h(()=>[l(oe,{icon:"phone_in_talk",color:"primary","text-color":"white"}),tt]),_:1}),l(re,{align:"right"},{default:h(()=>[O(l(p,{label:"\u62D2\u5426\u3059\u308B",color:"primary"},null,512),[[V]]),O(l(p,{label:"\u7740\u4FE1\u97F3\u30C6\u30B9\u30C8\u3092\u958B\u59CB\u3059\u308B",onClick:e.onClickStartRingingTest},null,8,["onClick"]),[[V]])]),_:1})]),_:1})]),_:1},8,["modelValue"]),it],64)}var at=ee(Fe,[["render",nt]]);const st=["top","right","bottom","left"],ge={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>st.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function pe(e,t){return{formClass:o(()=>`q-fab--form-${e.square===!0?"square":"rounded"}`),stacked:o(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:o(()=>{if(e.externalLabel===!0){const n=e.hideLabel===null?t.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`q-fab__label q-tooltip--style q-fab__label--external q-fab__label--external-${e.labelPosition}`+(n===!0?" q-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`q-fab__label q-fab__label--internal q-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" q-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const ve={start:"self-end",center:"self-center",end:"self-start"},lt=Object.keys(ve);var ce=N({name:"QFabAction",props:{...ge,icon:{type:String,default:""},anchor:{type:String,validator:e=>lt.includes(e)},to:[String,Object],replace:Boolean},emits:["click"],setup(e,{slots:t,emit:n}){const i=F(me,()=>({showing:{value:!0},onChildClick:fe})),{formClass:c,labelProps:s}=pe(e,i.showing),a=o(()=>{const r=ve[e.anchor];return c.value+(r!==void 0?` ${r}`:"")}),d=o(()=>e.disable===!0||i.showing.value!==!0);function v(r){i.onChildClick(r),n("click",r)}function y(){const r=[];return t.icon!==void 0?r.push(t.icon()):e.icon!==""&&r.push(m(Q,{name:e.icon})),(e.label!==""||t.label!==void 0)&&r[s.value.action](m("div",s.value.data,t.label!==void 0?t.label():[e.label])),J(t.default,r)}const T=R();return Object.assign(T.proxy,{click:v}),()=>m(p,{class:a.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:d.value,onClick:v},y)}});const ot=["up","right","down","left"],rt=["left","center","right"];var ut=N({name:"QFab",props:{...ge,...we,icon:String,activeIcon:String,hideIcon:Boolean,hideLabel:{default:null},direction:{type:String,default:"right",validator:e=>ot.includes(e)},persistent:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>rt.includes(e)}},emits:Oe,setup(e,{slots:t}){const n=ae(null),i=ae(e.modelValue===!0),c=Ie(),{proxy:{$q:s}}=R(),{formClass:a,labelProps:d}=pe(e,i),v=o(()=>e.persistent!==!0),{hide:y,toggle:T}=Ne({showing:i,hideOnRouteChange:v}),r=o(()=>({opened:i.value})),k=o(()=>`q-fab z-fab row inline justify-center q-fab--align-${e.verticalActionsAlign} ${a.value}`+(i.value===!0?" q-fab--opened":" q-fab--closed")),_=o(()=>`q-fab__actions flex no-wrap inline q-fab__actions--${e.direction} q-fab__actions--${i.value===!0?"opened":"closed"}`),D=o(()=>{const C={id:c,role:"menu"};return i.value!==!0&&(C["aria-hidden"]="true"),C}),S=o(()=>`q-fab__icon-holder  q-fab__icon-holder--${i.value===!0?"opened":"closed"}`);function E(C,te){const ie=t[C],ne=`q-fab__${C} absolute-full`;return ie===void 0?m(Q,{class:ne,name:e[te]||s.iconSet.fab[te]}):m("div",{class:ne},ie(r.value))}function be(){const C=[];return e.hideIcon!==!0&&C.push(m("div",{class:S.value},[E("icon","icon"),E("active-icon","activeIcon")])),(e.label!==""||t.label!==void 0)&&C[d.value.action](m("div",d.value.data,t.label!==void 0?t.label(r.value):[e.label])),J(t.tooltip,C)}return Te(me,{showing:i,onChildClick(C){y(C),n.value!==null&&n.value.$el.focus()}}),()=>m("div",{class:k.value},[m(p,{ref:n,class:a.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,"aria-expanded":i.value===!0?"true":"false","aria-haspopup":"true","aria-controls":c,onClick:T},be),m("div",{class:_.value,...D.value},X(t.default))])}});const dt={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},expand:Boolean};function ct(){const{props:e,proxy:{$q:t}}=R(),n=F(he,$);if(n===$)return console.error("QPageSticky needs to be child of QLayout"),$;const i=o(()=>{const r=e.position;return{top:r.indexOf("top")>-1,right:r.indexOf("right")>-1,bottom:r.indexOf("bottom")>-1,left:r.indexOf("left")>-1,vertical:r==="top"||r==="bottom",horizontal:r==="left"||r==="right"}}),c=o(()=>n.header.offset),s=o(()=>n.right.offset),a=o(()=>n.footer.offset),d=o(()=>n.left.offset),v=o(()=>{let r=0,k=0;const _=i.value,D=t.lang.rtl===!0?-1:1;_.top===!0&&c.value!==0?k=`${c.value}px`:_.bottom===!0&&a.value!==0&&(k=`${-a.value}px`),_.left===!0&&d.value!==0?r=`${D*d.value}px`:_.right===!0&&s.value!==0&&(r=`${-D*s.value}px`);const S={transform:`translate(${r}, ${k})`};return e.offset&&(S.margin=`${e.offset[1]}px ${e.offset[0]}px`),_.vertical===!0?(d.value!==0&&(S[t.lang.rtl===!0?"right":"left"]=`${d.value}px`),s.value!==0&&(S[t.lang.rtl===!0?"left":"right"]=`${s.value}px`)):_.horizontal===!0&&(c.value!==0&&(S.top=`${c.value}px`),a.value!==0&&(S.bottom=`${a.value}px`)),S}),y=o(()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--${e.expand===!0?"expand":"shrink"}`);function T(r){const k=X(r.default);return m("div",{class:y.value,style:v.value},e.expand===!0?k:[m("div",k)])}return{$layout:n,getStickyContent:T}}var ht=N({name:"QPageSticky",props:dt,setup(e,{slots:t}){const{getStickyContent:n}=ct();return()=>n(t)}}),ft=ke({name:"touch-hold",beforeMount(e,t){const{modifiers:n}=t;if(n.mouse!==!0&&H.has.touch!==!0)return;const i={handler:t.value,noop:fe,mouseStart(s){typeof i.handler=="function"&&$e(s)===!0&&(L(i,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),i.start(s,!0))},touchStart(s){if(s.target!==void 0&&typeof i.handler=="function"){const a=s.target;L(i,"temp",[[a,"touchmove","move","passiveCapture"],[a,"touchcancel","end","notPassiveCapture"],[a,"touchend","end","notPassiveCapture"]]),i.start(s)}},start(s,a){i.origin=se(s);const d=Date.now();H.is.mobile===!0&&(document.body.classList.add("non-selectable"),x(),i.styleCleanup=v=>{i.styleCleanup=void 0;const y=()=>{document.body.classList.remove("non-selectable")};v===!0?(x(),setTimeout(y,10)):y()}),i.triggered=!1,i.sensitivity=a===!0?i.mouseSensitivity:i.touchSensitivity,i.timer=setTimeout(()=>{i.timer=void 0,x(),i.triggered=!0,i.handler({evt:s,touch:a!==!0,mouse:a===!0,position:i.origin,duration:Date.now()-d})},i.duration)},move(s){const{top:a,left:d}=se(s);i.timer!==void 0&&(Math.abs(d-i.origin.left)>=i.sensitivity||Math.abs(a-i.origin.top)>=i.sensitivity)&&(clearTimeout(i.timer),i.timer=void 0)},end(s){M(i,"temp"),i.styleCleanup!==void 0&&i.styleCleanup(i.triggered),i.triggered===!0?s!==void 0&&qe(s):i.timer!==void 0&&(clearTimeout(i.timer),i.timer=void 0)}},c=[600,5,7];if(typeof t.arg=="string"&&t.arg.length!==0&&t.arg.split(":").forEach((s,a)=>{const d=parseInt(s,10);d&&(c[a]=d)}),[i.duration,i.touchSensitivity,i.mouseSensitivity]=c,e.__qtouchhold=i,n.mouse===!0){const s=n.mouseCapture===!0||n.mousecapture===!0?"Capture":"";L(i,"main",[[e,"mousedown","mouseStart",`passive${s}`]])}H.has.touch===!0&&L(i,"main",[[e,"touchstart","touchStart",`passive${n.capture===!0?"Capture":""}`],[e,"touchend","noop","notPassiveCapture"]])},updated(e,t){const n=e.__qtouchhold;n!==void 0&&t.oldValue!==t.value&&(typeof t.value!="function"&&n.end(),n.handler=t.value)},beforeUnmount(e){const t=e.__qtouchhold;t!==void 0&&(M(t,"main"),M(t,"temp"),t.timer!==void 0&&clearTimeout(t.timer),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchhold)}});const j="SPEED_DIALS",mt=Z({props:{position:{type:String,required:!1,default:"bottom-right"}},data(){return{isFabOpen:!1,isDialogOpen:!1,isEditing:!1,name:"",number:"",dials:q.getItem(j)||[],dial:{}}},methods:{onClickAdd(){this.isEditing=!1,this.isDialogOpen=!0,this.name="",this.number=""},onClickRegister(){this.isDialogOpen=!1,!(this.name.length===0||this.number.length===0)&&(this.isEditing?this.dials=this.update(this.dial.id,this.name,this.number):this.dials.push({id:this.getNextID(),name:this.name,number:this.number}),q.set(j,this.dials),this.name="",this.number="",this.isFabOpen=!0)},onClickRemove(){this.dials=this.delete(this.dial.id),q.set(j,this.dials),this.isDialogOpen=!1,this.isFabOpen=!0},onClick(e){e.info="dummmy",b.dispatch(b.Type.OnClickCustomerListCallBtn,e)},onHoldDown(e){this.dial=e,this.isEditing=!0,this.isDialogOpen=!0,this.isFabOpen=!1,this.name=e.name,this.number=e.number},update(e,t,n){return this.dials.map(i=>i.id===e?{...i,name:t,number:n}:i)},delete(e){return this.dials.filter(t=>t.id!==e)},getNextID(){return!this.dials||this.dials.length===0?1:this.getMaxID()+1},getMaxID(){let e=this.dials[0].id;for(var t=1;t<this.dials.length;t++)this.dials[t].id>e&&(e=this.dials[t].id);return e}},computed:{fabIcon(){return this.position==="bottom-right"||this.position==="bottom-left"?"keyboard_arrow_up":this.position==="top-right"||this.position==="top-left"?"keyboard_arrow_down":"keyboard_arrow_up"},fabDirection(){return this.position==="bottom-right"||this.position==="bottom-left"?"up":this.position==="top-right"||this.position==="top-left"?"down":"up"}}}),gt={class:"full-width q-px-sm"},pt={class:"full-width q-px-sm"};function vt(e,t,n,i,c,s){return g(),I(z,null,[l(ht,{position:e.position,offset:[18,18]},{default:h(()=>[l(ut,{color:"dark",icon:e.fabIcon,direction:e.fabDirection,"vertical-actions-align":"right",modelValue:e.isFabOpen,"onUpdate:modelValue":t[0]||(t[0]=a=>e.isFabOpen=a)},{default:h(()=>[l(ce,{onClick:e.onClickAdd,icon:"add"},null,8,["onClick"]),(g(!0),I(z,null,Pe(e.dials,(a,d)=>O((g(),U(ce,{key:d,color:"grey-2","text-color":"dark",icon:"person",label:a.name,onClick:()=>{e.onClick(a)}},null,8,["label","onClick"])),[[ft,()=>{e.onHoldDown(a)},"500",{mouse:!0}]])),128))]),_:1},8,["icon","direction","modelValue"])]),_:1},8,["position"]),l(W,{modelValue:e.isDialogOpen,"onUpdate:modelValue":t[3]||(t[3]=a=>e.isDialogOpen=a),position:"right"},{default:h(()=>[l(Y,{style:{width:"500px"}},{default:h(()=>[l(B,{class:"row items-center no-wrap"},{default:h(()=>[u("div",gt,[l(K,{outlined:"",modelValue:e.name,"onUpdate:modelValue":t[1]||(t[1]=a=>e.name=a),label:"Name"},{prepend:h(()=>[l(Q,{name:"account_circle"})]),_:1},8,["modelValue"])]),u("div",pt,[l(K,{outlined:"",modelValue:e.number,"onUpdate:modelValue":t[2]||(t[2]=a=>e.number=a),type:"number",label:"Number"},{prepend:h(()=>[l(Q,{name:"call"})]),_:1},8,["modelValue"])])]),_:1}),e.name.length>0&&e.number.length>0?(g(),U(B,{key:0,class:"q-pt-none"},{default:h(()=>[l(p,{color:"dark",icon:"person",label:`\u30B9\u30D4\u30FC\u30C9\u30C0\u30A4\u30E4\u30EB\u3092${e.isEditing?"\u66F4\u65B0":"\u767B\u9332"}\u3059\u308B`,class:"full-width",onClick:e.onClickRegister},null,8,["label","onClick"]),e.isEditing?(g(),U(p,{key:0,color:"dark",icon:"close",label:"\u524A\u9664\u3059\u308B",class:"full-width q-mt-xs",onClick:e.onClickRemove},null,8,["onClick"])):A("",!0)]),_:1})):A("",!0)]),_:1})]),_:1},8,["modelValue"])],64)}var bt=ee(mt,[["render",vt]]);const Ct=Z({components:{SimplePhone:at,SpeedDial:bt}});function yt(e,t,n,i,c,s){const a=le("SimplePhone"),d=le("SpeedDial");return g(),U(Re,null,{default:h(()=>[l(a),l(d)]),_:1})}var Ut=ee(Ct,[["render",yt]]);export{Ut as default};
